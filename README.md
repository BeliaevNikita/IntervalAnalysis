# IntervalAnalysis
[Структура проекта](#structure)

[Описание класса Segment](#segment)

[Описание класса Command](#command)

[Описание класса BaseBlock](#baseblock)

[Передаточные функции](#funcs)
[Результаты](#results)
## Structure
Инструкции считываются из файла testcase.reil. Граф хранится как список вершин в переменной vertices, каждая вершина явдяется объектом класса [BaseBlock](#baseblock), и словарь blk_beg, хранящий пару (ключ, значение): (номер инструкции-начала блока, номер вершины графа, которой соответсвует этот блок). Для каждой инструкции реаилована передаточная функция с именем: f_имя инструкции. Подробнее в [Передаточные функции](#funcs). Топологическая сортировка происходит с помощью массива visited, где visited[v] = True - посещена вершина с номером v, результат сохраняется в переменной order. Далее в цикле обходим вершины графа в порядке топологической сортировки: функция calculating принимает номер вершины (блока) и вычисляет для каждой команды из блока таблицы состояний до и после выполнения инструкций (с помощью методов [класса Command](#command), а также влияние на последующие блоки как предка. Программа выводит устройство графа, порядок вершин в топологической сортировке, таблицу состояний для каждой инструкции и итоговой диапазон возвращаемого значения. [Результаты работы программы на тестах](#results)
## BaseBolck
Содержит в себя список команд базового блока и список ребер к другим блокам. Ребра имеют формат: [
1)номер инструкции начала блока,  2)команду  при которой происхдоит переход (jg, jl, jle, jge, пустая строка - если переход был при завершении предыдущего блока, jng, jnl, jnle, jnge - если переход по ребру происходит при отрицании условия,  3)число - ограничение на  диапазон значений (бесконечность в случае, когда команда - пустая строка)]
## Segment
Содержит 2 поля left, right - минимальное и максимальное значения переменной соответсвенно.Пустой отрезок представлен как (None, None), число со значением val как (val, val).
Реализованы следующие операции: операция приведения к строке, которая выведет [left, right]; операции +,-,*,+= производятся между двумя объектами класса Segment; + - сложение 2х отрезков (сложение их границ, сложение с пустым отрезком приводит к появлению пустого отрезка); += - объединение отрезков (объединение с пустым отрезком это исходный отрезок); операция >> - наложения ограничения на левую границу отрезка; операция << - накладывает ограничения на правую границу отрезка. Операции <<, >> производятся между объектом класса Segment и числом.
## Command
Содержит поля: com - список, созданный из операндов инструкции, IN, OUT - начальная и конечная таблицы состояний инструкции, blk_num - номер блока, в котором содержится команда, метод execute - выполяющий инструкцию с помощью вызова соответствуюшей [функции](#funcs), здесь используется функция merge(dest, new), обновляющая значения словаря dest с помощью словаря new. Также реализвана операция сравнения, чтобы отслеживать, что команда последняя в блоке
## Funcs
Функции, соотоветсвующие командам add, sub, mul, str принимает операнды этих инстуркций и таблицу состояний IN и возвращают новую таблицу состояний OUT. Функции перехода принимают в качестве параметров номер блока из которого будет совершен переход и истинность или ложность условия перехода (выраженно со помощью строки)
## Results
Результаты работы программы        
Using limitations for x: -3, 4 and y: 3, 5       
Limitations for return value: [-4, 3]      
Using limitations for x: -3, 4 and y: -2, 1      
Limitations for return value: [-4, 8]       
Using limitations for x: -3, 4 and y: -3, -1     
Limitations for return value: [-4, 9]      
Using limitations for x: 0, 3 and y: 3, 5      
Limitations for return value: [-3, 0]      
Using limitations for x: 0, 3 and y: -2, 1    
Limitations for return value: [-3, 0]     
Using limitations for x: 0, 3 and y: -3, -1    
Limitations for return value: [-3, 0]     
Using limitations for x: -4, 8 and y: 3, 5    
Limitations for return value: [-29, 5]     
Using limitations for x: -4, 8 and y: -2, 1     
Limitations for return value: [-34, 10]     
Using limitations for x: -4, 8 and y: -3, -1     
Limitations for return value: [-35, 11]     
